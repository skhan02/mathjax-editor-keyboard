!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.MathJaxEditorKeyboard=t():e.MathJaxEditorKeyboard=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=14)}([function(e,t){"use strict";function n(e){var t=new Error("You must define a target element.");if(!e)throw t;if("string"==typeof e){var n=document.querySelector(e);if(!n)throw t;return n}return e}function i(e,t,n){var i=e.slice(0,t),r=e.slice(t);return i+n+r}function r(e,t){var n=e.className.split(" "),i="",r=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;u!==t&&(i+=" "+u)}}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}e.className=i.trim()}function a(e,t){var n=e.className.split(" ");~n.indexOf(t)||(e.className+=" "+t),e.className=e.className.trim()}function o(e){var t=[].slice;return t.call(e)}function s(e,t){return!!~t.indexOf(e)}function l(e,t){return s(e,t)}function u(e,t){for(var n="",i=e+e,r=t%2!==0,a=Math.floor(t/2),o=0;o<a;o++)n+=i;return r&&(n+=e),n}function c(e,t,n){return e.slice(0,t)+e.slice(n)}function d(e){var t=e.map(function(e){return"\\"+e}).join("");return new RegExp("^["+t+"]$")}Object.defineProperty(t,"__esModule",{value:!0}),t.mustFindElement=n,t.insertBetween=i,t.removeClass=r,t.addClass=a,t.toArray=o,t.isAny=s,t.inArray=l,t.repeat=u,t.removeFragment=c,t.listToCharacterRegex=d},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){n(this,e),this.registry={}}return i(e,[{key:"on",value:function(e,t){this.registry[e]=(this.registry[e]||[]).concat(t)}},{key:"trigger",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.registry[e]&&this.registry[e].forEach(function(e){return e.apply(void 0,n)})}}]),e}();t.default=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={cursorTex:"{\\cursor}",emptyTex:"\\isEmpty",number:/^[0-9]$/,variable:/^[a-z]$/,nearClosureHaystack:["}","]"],operators:["+","-","=","<",">",",",".",":",";","?","(",")","[","]","|"],escapedOperators:["{","}","%"],escType:{"%":"mi"}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(5),s=i(o),l=n(0),u=n(13),c=n(12),d=(i(c),n(11)),f=i(d),h=(f.default.keyRows,f.default.keyColumns),p=f.default.getKey,y=f.default.keyList,m=320,v=function(){function e(t){r(this,e);var n=MathJax.HTML.Element,i=n("div",{className:"mjk-container"}),a=n("div",{className:"mjk-keyboard"}),o=window.innerWidth;i.appendChild(a),document.body.appendChild(i);var l=new s.default(t);this.editor=l,this.isMobile=o<640,this.isVisible=!1,this.$container=i,this.$keyboard=a,this.$editorContainer=l.core.$container,this.$editorContainerParent=l.core.$container.parentNode,this.$editorInput=l.core.$input,document.addEventListener("click",this.handleDocumentClick.bind(this)),this.hideKeyboard()}return a(e,[{key:"render",value:function(){var e=this,t=MathJax.HTML.Element,n=this.$keyboard,i=this.editor,r=(m-20)/h,a=r+"px";(0,u.emptyElement)(n),n.style.width=m+"px",y.forEach(function(r,o){var s=t("div",{className:"mjk-keyRow"});r.forEach(function(n,r){var l=p(o,r),u=l.getClickListener(),c=t("button",{className:"mjk-key",style:{fontSize:"16px",height:a,width:a}});c.innerHTML=l.getLabel(),c.addEventListener("click",function(){u(i),e.updateInputElement()}),s.appendChild(c)}),n.appendChild(s)}),MathJax.Hub.Typeset(n),this.updateInputElement(),this.updateContainerElement()}},{key:"updateInputElement",value:function(){var e=this.$keyboard,t=this.$container,n=this.$editorContainer,i=this.$editorInput,r=(this.$editorContainerParent,window.innerWidth),a=e.getBoundingClientRect(),o=a.top;if(this.isMobile){var s=(Math.max(r,320)-m)/2;i.setAttribute("readonly","true"),t.appendChild(n),(0,l.addClass)(n,"mjk-input"),(0,l.addClass)(e,"isMobile"),(0,u.applyStyles)(e,{paddingLeft:s,paddingRight:s}),(0,u.applyStyles)(n,{fontSize:12,left:0,width:r}),(0,u.applyStyles)(n,{top:o-n.offsetHeight})}else(0,l.removeClass)(e,"isMobile"),this.appendEditorToItsOriginalParent()}},{key:"appendEditorToItsOriginalParent",value:function(){var e=this.$editorContainer,t=this.$editorContainerParent;(0,l.removeClass)(e,"mjk-input"),t.appendChild(e)}},{key:"updateContainerElement",value:function(){var e=this.$keyboard,t=this.$container,n=this.$editorContainer,i=(window.innerWidth,void 0),r=void 0,a=void 0,o=void 0;if(this.isMobile)i="100%",r=0,a=0,o="100%";else{var s=n.getBoundingClientRect(),l=e.getBoundingClientRect(),c=16,d=s.left+s.width/2-l.width/2;i=l.height,r=d,a=s.top+s.height+c,o=l.width}(0,u.applyStyles)(t,{height:i,left:r,top:a,width:o})}},{key:"showKeyboard",value:function(){this.isVisible||(this.isVisible=!0,this.$container.style.display="block",this.render())}},{key:"hideKeyboard",value:function(){this.isVisible=!1,this.editor.blur(),this.$container.style.display="none",this.appendEditorToItsOriginalParent()}},{key:"handleDocumentClick",value:function(e){var t=this.$container,n=this.$editorContainer,i=e.target;return this.isMobile&&i===t?this.hideKeyboard():(0,u.findNode)(i,n)?this.showKeyboard():(0,u.findNode)(i,t)?void 0:this.hideKeyboard()}}]),e}();t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),s=i(o),l=n(6),u=i(l),c=n(7),d=i(c),f=n(0),h=8,p=13,y=37,m=39,v=46,b=function(){function e(t){var n=this;r(this,e);var i=t.el,a=t.debug,o=void 0!==a&&a,l=t.focusClass,u=void 0===l?"isFocused":l,c=t.newLine,h=void 0!==c&&c,p=t.value,y=void 0===p?"":p,m=t.scroll,v=void 0!==m&&m,b=MathJax.HTML.Element,k=(0,f.mustFindElement)(i),x=b("div",{className:"mj-ed-container"}),g=b("input",{className:"mj-ed-input"}),C=b("div",{className:"mj-ed-display"},["\\({\\cursor}"+y+"\\)"]),w=b("pre",{className:"mj-ed-debug"},["|"]);k.parentNode.replaceChild(x,k),x.appendChild(g),x.appendChild(C),x.appendChild(w),g.addEventListener("keydown",this.handleInputEvent.bind(this)),g.addEventListener("keyup",this.handleInputEvent.bind(this)),g.addEventListener("blur",this.blur.bind(this)),C.addEventListener("click",this.focus.bind(this)),document.body.addEventListener("click",this.handleBodyClick.bind(this)),C.style.opacity=0,C.style.overflowX=v?"scroll":"hidden",w.style.display=o?"block":"none",MathJax.Hub.Queue(function(){return MathJax.Hub.Typeset(C)},function(){return n.jaxElement=MathJax.Hub.getAllJax(C)[0]},function(){C.style.opacity=1,C.style.minHeight=C.offsetHeight+"px",n.update({cursorHidden:!0})}),this.$container=x,this.$debug=w,this.$display=C,this.$input=g,this.bus=new s.default,this.cursorIndex=0,this.lastCursorTimeout=null,this.placer=null,this.debug=o,this.focusClass=u,this.newLine=h,this.tex=new d.default(y,0),this.value=y,this.lastValue=y}return a(e,[{key:"update",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.cursorIndex,i=this.value,r=this.tex;i!==this.lastValue&&(r=new d.default(i,n),this.tex=r),this.debug&&(this.$debug.innerHTML=(0,f.insertBetween)(i,n,"|")),this.updateJaxElement(r.displayTex,function(){setTimeout(function(){var t=new u.default(e);t.on("setCursor",function(t){e.debug&&console.log("The cursor should be placed at "+t+"."),e.cursorIndex=t,e.update()}),e.placer=t},16),e.updateCursorElement(t)})}},{key:"updateJaxElement",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Function;MathJax.Hub.Queue(function(){return t.jaxElement.Text(e)},n)}},{key:"updateCursor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.cursorIndex,n=this.tex.cursorPoints,i=n.indexOf(t),r=t;e>0?r=n[i+1]:e<0&&(r=n[i-1]),this.cursorIndex=r,this.update()}},{key:"updateCursorElement",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.$display,i=t.cursorHidden||!1,r="wasRecentlyPlaced";MathJax.Hub.Queue(function(){var t=n.querySelector(".mjx-cursor");if(t){var a=t.offsetWidth,o=t.offsetLeft;t.style.marginLeft||(t.style.marginLeft="-"+a+"px"),e.lastCursorTimeout&&clearTimeout(e.lastCursorTimeout),(0,f.addClass)(t,r),e.lastCursorTimeout=setTimeout(function(){return(0,f.removeClass)(t,r)},600),n.scrollLeft=o,t.style.display=i?"none":"inline-block"}})}},{key:"setValue",value:function(e){this.lastValue=this.value,this.value=e}},{key:"handleInputEvent",value:function(e){var t=this,n=this.$input,i=n.value.trim(),r=e.keyCode;if(n.value="","keyup"===e.type&&(r=null),!i.length)return this.handleInput(r);var a={"+":"+","-":"-","=":"=",",":",",".":".","*":"\\cdot ","/":"\\div "},o={char:/[\d\w]/};i.split("").forEach(function(e){(e.match(o.char)||a[e])&&(a[e]&&(e=a[e]),t.handleInput(r,e))})}},{key:"handleInput",value:function(e,t){switch(e){case y:return void this.moveCursorLeft();case m:return void this.moveCursorRight();case h:return void this.erase();case v:return void this.delete();case p:return void(this.newLine&&this.insert("\\\\"))}e&&this.debug&&console.warn("The key "+e+" was pressed."),t&&this.insert(t)}},{key:"moveCursorLeft",value:function(){this.cursorIndex>0&&this.updateCursor(-1)}},{key:"moveCursorRight",value:function(){this.cursorIndex<this.value.length&&this.updateCursor(1)}},{key:"handleBodyClick",value:function(e){this.placer&&this.placer.trigger("click",e)}},{key:"focus",value:function(){this.$input.focus(),this.updateCursorElement({cursorHidden:!1}),this.bus.trigger("focus"),(0,f.addClass)(this.$display,this.focusClass)}},{key:"blur",value:function(){this.$input.blur(),this.updateCursorElement({cursorHidden:!0}),this.bus.trigger("blur"),(0,f.removeClass)(this.$display,this.focusClass)}},{key:"insert",value:function(e){var t=this.cursorIndex,n=this.value;this.cursorIndex+=e.length,this.setValue((0,f.insertBetween)(n,t,e)),this.update()}},{key:"insertCommand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=["^","_"];if(this.focus(),"\\"===e[0]||(0,f.isAny)(e,i)||(e="\\"+e),n&&(e+="[]"),e+=t>0?"{":" ",this.insert(e),!(t<1)){var r=this.value,a=this.cursorIndex,o="}"+(0,f.repeat)("{}",t-1);this.setValue((0,f.insertBetween)(r,a,o)),this.update()}}},{key:"applyDeletion",value:function(e){var t=this.cursorIndex,n=this.tex,i=t-1,r=n.elements,a=null,o=null,s=void 0,l=void 0,u=void 0,c=void 0,d=void 0;switch(e){case"erase":if(0===t)return;s=i,l="end",u="openIndex",c=i,d=t;break;case"delete":if(t===n.length)return;s=t,l="start",u="closeIndex",c=t,d=t+1;break;default:throw new RangeError('Unknown method "'+e+'".')}if(n.newLines[s]){var h=n.newLines[s];a=h.start,o=h.end+1}else{var p=!0,y=!1,m=void 0;try{for(var v,b=r[Symbol.iterator]();!(p=(v=b.next()).done);p=!0){var k=v.value,x=k.index,g=k.props;if(g){var C=g.brackets;if(g[l]===s||C&&C[u]===s){a=g.start,o=g.end+1;break}var w=!0,E=!1,j=void 0;try{for(var T,I=g.blocks[Symbol.iterator]();!(w=(T=I.next()).done);w=!0){var S=T.value;if(S[u]===s){a=g.start,o=g.end+1;break}}}catch(e){E=!0,j=e}finally{try{!w&&I.return&&I.return()}finally{if(E)throw j}}}else if(x===s){a=c,o=d;break}}}catch(e){y=!0,m=e}finally{try{!p&&b.return&&b.return()}finally{if(y)throw m}}}this.cursorIndex=a,this.setValue((0,f.removeFragment)(this.value,a,o)),this.update()}},{key:"erase",value:function(){this.applyDeletion("erase")}},{key:"delete",value:function(){this.applyDeletion("delete")}},{key:"on",value:function(e,t){this.bus.on(e,t)}}]),e}();t.default=b},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(4),s=i(o),l=n(8),u=i(l),c=n(0),d=n(2),f=i(d);window.addEventListener("load",u.default);var h=function(){function e(t){r(this,e);var n=new s.default(t);this.core=n,this.version="1.2.8"}return a(e,[{key:"blur",value:function(){this.core.blur()}},{key:"focus",value:function(){this.core.focus()}},{key:"insertCommand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.core.insertCommand(e,t,n)}},{key:"insert",value:function(e){var t=f.default.number,n=f.default.variable;if(1!==e.length)throw new RangeError("Only one char can be inserted through this method.");if(!e.match(t)&&!e.match(n))throw new RangeError('Only numbers and variables are allowed in insert, not "'+e+'".');this.core.insert(e)}},{key:"insertSymbol",value:function(e){var t=f.default.operators,n=f.default.escapedOperators,i=t.slice().concat(n);if(!(0,c.inArray)(e,i))throw new RangeError('"'+e+'" is not a valid symbol.');(0,c.inArray)(e,n)&&(e="\\"+e),this.core.insert(e)}},{key:"getValue",value:function(){return this.core.value}},{key:"moveCursorLeft",value:function(){this.core.moveCursorLeft()}},{key:"moveCursorRight",value:function(){this.core.moveCursorRight()}},{key:"erase",value:function(){this.core.erase()}},{key:"on",value:function(e,t){this.core.on(e,t)}}]),e}();e.exports=h},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(1),l=i(s),u=[],c=function(){function e(t){r(this,e);var n=new l.default;n.on("click",this.handleClick.bind(this)),this.$display=t.$display,this.bus=n,this.intervals=[],this.elements=t.tex.elements,this.findings={},this.tex=t.tex,this.iterate()}return o(e,[{key:"on",value:function(e,t){this.bus.on(e,t)}},{key:"trigger",value:function(e){for(var t,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=this.bus).trigger.apply(t,[e].concat(i))}},{key:"handleClick",value:function(e){var t=this,n=this.$display.getBoundingClientRect(),i=n.top,r=n.bottom,o=e.clientX,s=e.clientY,l=this.intervals,u=this.tex.length;if(!l.length||s>r||s<i)return!1;var c=!1,d=!0;if(l.forEach(function(e,n){e.startX<=o&&o<e.endX&&d&&e.startY<=s&&s<e.endY&&(c=!0,u=t.placeAtInterval(e,n,o,s),e.box&&(d=!1))}),!c){var f=function(){var e={interval:null,distance:null,i:null};return l.forEach(function(t,n){if(t.startY<s&&s<t.endY){var i=Math.min(Math.abs(t.startX-o),Math.abs(t.endX-o));(null===e.distance||i<e.distance)&&(e.interval=t,e.distance=i,e.i=n)}}),e.interval?void(u=t.placeAtInterval(e.interval,e.i,o,s)):{v:!1}}();if("object"===("undefined"==typeof f?"undefined":a(f)))return f.v}this.bus.trigger("setCursor",u)}},{key:"getNextKeyFor",value:function(e){this.findings[e]=this.findings[e]||0;var t=this.findings[e];return this.findings[e]+=1,t}},{key:"addIntervalAt",value:function(e,t){this.intervals.splice(e,0,t)}},{key:"addInterval",value:function(e){Number.isNaN(e.index)&&(console.log(this.elements),console.error("This interval has NaN as index.")),this.intervals.push(e)}},{key:"addIntervalBox",value:function(e,t){var n=t.top,i=t.bottom,r=t.left,a=t.right;this.addInterval({index:e,startX:r,endX:a,startY:n,endY:i,box:!0})}},{key:"addBouncinglessInterval",value:function(e){this.addInterval({index:e,top:0,bottom:0,left:0,right:0})}},{key:"placeAtInterval",value:function(e,t,n,i){var r=this.intervals,a=e.endX-e.startX,o=t+1,s=e.index;return e.box?s:(n>e.startX+a/2&&(s=r[o]?r[o].index:this.tex.length),s)}},{key:"iterate",value:function(){var e=this;this.elements.forEach(function(t){switch(t.is){case"command":e.findCommand(t);break;case"eol":e.findEndOfLine(t);break;default:e.find(t)}})}},{key:"find",value:function(e){var t=e.type,n=e.index,i=e.nearClosure,r=this.getNextKeyFor(t),a=this.$display.querySelectorAll(".mjx-"+t)[r];if(!a)return console.warn("Could not find an element of type "+t+".",n);var o=a.getBoundingClientRect(),s=o.left,l=o.right,u=o.top,c=o.bottom;this.addInterval({startX:s,endX:l,startY:u,endY:c,index:n}),i&&this.addBouncinglessInterval(n+1)}},{key:"findCommand",value:function(e){var t=this,n=e.type,i=(e.index,e.props),r=this.getNextKeyFor(n),a=this.$display.querySelectorAll(".mjx-m"+n)[r],o=i.brackets,s=i.blocks,l=i.subType;switch(this.addBouncinglessInterval(i.start),n){case"frac":var u=a.querySelector(".mjx-numerator"),c=a.querySelector(".mjx-denominator"),d=u.getBoundingClientRect(),f=c.getBoundingClientRect(),h=[d,f];h.forEach(function(e,n){1===s[n].length&&t.addIntervalBox(s[n].closeIndex,e)});break;case"root":case"sqrt":if(o&&o.closeIndex-o.openIndex===1){var p=a.querySelector(".mjx-root .mjx-char"),y=p.getBoundingClientRect();this.addIntervalBox(o.closeIndex,y)}if(1===s[0].length){var m=a.querySelector(".mjx-box"),v=m.getBoundingClientRect();this.addIntervalBox(s[0].closeIndex,v)}break;case"subsup":if(1===s[0].length){var b=a.querySelector(".mjx-"+l),k=b.getBoundingClientRect();this.addIntervalBox(s[0].closeIndex,k)}}}},{key:"findEndOfLine",value:function(e){var t=e.type,n=e.index,i=this.getNextKeyFor(t),r=this.$display.querySelectorAll(".mjx-"+t)[i];r||(r=this.$display.querySelector(".mjx-math"));var a=r.firstChild,o=a.getBoundingClientRect(),s=o.top,l=o.left,u=o.bottom,c=o.right,d=20,f=this.findLastStartOfLineIndex();this.addIntervalAt(f.intervalKey,{index:f.start,startX:l-d,endX:l,startY:s,endY:u,box:!0}),this.addInterval({index:n,startX:c,endX:c+d,startY:s,endY:u,box:!0})}},{key:"findLastStartOfLineIndex",value:function(){for(var e=this.intervals.slice().reverse(),t=e.length,n=0,i=0,r=0;n<t;n++){var a=e[n];if("eol"===a.is){i=a.index+2,r=key;break}}return{start:i,intervalKey:r}}},{key:"paint",value:function(e){var t=document.createElement("div");return t.style.position="absolute",t.style.backgroundColor="rgba(0, 0, 255, 0.5)",t.style.width=e.endX-e.startX+"px",t.style.height=e.endY-e.startY+"px",t.style.top=e.startY+"px",t.style.left=e.startX+"px",t.style.pointerEvents="none",document.body.appendChild(t),t}},{key:"paintIntervals",value:function(){var e=this;u.forEach(function(e){return document.body.removeChild(e)}),u=[],this.intervals.forEach(function(t){u.push(e.paint(t))}),console.log(this.intervals)}}]),e}();t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),s=n(2),l=i(s),u=l.default.nearClosureHaystack,c=l.default.cursorTex,d=l.default.emptyTex,f=l.default.escType,h={isNumber:l.default.number,isVariable:l.default.variable,isOperator:(0,o.listToCharacterRegex)(l.default.operators),isEscapedOperator:(0,o.listToCharacterRegex)(l.default.escapedOperators)},p=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(this,e),this.tex=t,this.cursorPoints=[],this.elements=[],this.newLines={},this.length=t.length,this.displayTex="",this.cursorIndex=n,this.isPartOfCommand=[],this.parse()}return a(e,[{key:"addCursorToTexDisplay",value:function(e){this.cursorPlaced||this.cursorIndex!==e||(this.cursorPlaced=!0,this.displayTex+=c)}},{key:"parse",value:function(){var e=[],t=this.tex,n=this.tex.length,i=(this.cursorIndex,0);for(this.cursorPlaced=!1;i<n;i++){var r=i,a=i+1,s=t[r],l=t[a],c=t[r-1],p=(0,o.isAny)(l,u),y=","===s,m=(0,o.isAny)(s,["<",">"]),v=h.isNumber.exec(s),b=h.isVariable.exec(s),k=h.isOperator.exec(s),x=h.isEscapedOperator.exec(l),g=y||v||m;if(this.addCursorToTexDisplay(r),g&&(this.displayTex+="{"),"}"===s&&"\\"!==c&&(this.displayTex+="\\;"),this.displayTex+=s,g&&(this.displayTex+="}"),v&&this.elements.push({is:"number",type:"mn",index:r,nearClosure:p}),b&&this.elements.push({is:"variable",type:"mi",index:r,nearClosure:p}),k&&!(0,o.inArray)(r,this.isPartOfCommand)&&this.elements.push({is:"operator",type:"mo",index:r,nearClosure:p}),"\\"===s&&x){var C=f[l]?f[l]:"mo";this.elements.push({is:"operator",type:C,index:r,nearClosure:p}),this.displayTex+=l,i+=1}if("\\"===s&&"\\"===l){var w={start:r,end:a};this.newLines[r]=w,this.newLines[a]=w,this.displayTex+="\\",this.elements.push({is:"eol",type:"block",index:r}),i+=1}"\\"===s&&h.isVariable.exec(l)&&(i=this.parseCommand(i)),(0,o.isAny)(s,["^","_"])&&(i=this.parseCommand(i)),"{"!==s?" "!==s&&e.push(r):(this.displayTex+="\\;","}"===l&&(this.addCursorToTexDisplay(a),this.displayTex+=d))}n&&this.elements.push({is:"eol",type:"block",index:n}),this.addCursorToTexDisplay(n),e.push(n),this.cursorPoints=e}},{key:"parseCommand",value:function(e){var t=e,n=this.tex,i=this.tex.length,r=(this.cursorIndex,n[t]),a=null,s=[],l=null,c=0,f="",p=null,y="command",m=t,v=null,b=!1;switch(r){case"^":f="subsup",p="sup";break;case"_":f="subsup",p="sub"}for(e=t;e<i;e++){var k=n[e],x=e+1,g=n[x],C=h.isVariable.exec(k);if(null===a&&(this.displayTex+=(0,o.isAny)(k,["\\","^","_"])?"":k,C&&(f+=k)),"["===k&&(l={openIndex:e},null===a&&(a=e),"]"===g&&(this.displayTex+=d)),"]"===k&&(l.closeIndex=e,this.isPartOfCommand.push(e)),"{"===k&&(0===c&&s.push({openIndex:e}),c+=1,null===a&&(a=e,this.displayTex+="\\;",this.addCursorToTexDisplay(x),"}"===g&&(this.displayTex+=d))),"}"===k&&(c-=1,0===c)){var w=s.length-1;s[w].closeIndex=e,s[w].length=e-s[w].openIndex}if(null===a&&" "===k){f=this.decideType(f),y="mo"===f?"operator":"variable",v=e,a=e,(0,o.isAny)(g,u)&&(b=!0);break}if("}"===k&&"{"!==g&&0===c){v=e;break}}if("sqrt"===f&&null!==l&&(f="root"),null===a)throw new SyntaxError("Looks like this TeX is invalid. Now have a hard time finding where, lul.");return this.elements.push({is:y,type:f,index:t,nearClosure:b,props:{subType:p,start:m,end:v,opening:a,blocks:s,brackets:l}}),a}},{key:"decideType",value:function(e){var t={alpha:"mi",beta:"mi",gamma:"mi",Gamma:"mi",delta:"mi",Delta:"mi",epsilon:"mi",varepsilon:"mi",zeta:"mi",eta:"mi",theta:"mi",vartheta:"mi",Theta:"mi",iota:"mi",kappa:"mi",lambda:"mi",mu:"mi",nu:"mi",xi:"mi",Xi:"mi",pi:"mi",Pi:"mi",rho:"mi",varrho:"mi",sigma:"mi",Sigma:"mi",tau:"mi",upsilon:"mi",Upsilon:"mi",phi:"mi",varphi:"mi",Phi:"mi",chi:"mi",psi:"mi",Psi:"mi",omega:"mi",Omega:"mi","%":"mi"};return t.hasOwnProperty(e)?t[e]:"mo"}}]),e}();t.default=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=MathJax.InputJax.TeX,t=MathJax.ElementJax.mml;MathJax.Hub.processSectionDelay=0,MathJax.Hub.Register.StartupHook("TeX Jax Ready",function(){var n={mathvariant:t.INHERIT,mathsize:t.INHERIT,mathbackground:t.INHERIT,mathcolor:t.INHERIT,dir:t.INHERIT};e.Definitions.Add({macros:{cursor:"Cursor",isEmpty:"IsEmpty"}},null,!0),t.mcursor=t.mbase.Subclass({type:"cursor",isToken:!0,isSpacelike:function(){return!0},texClass:t.TEXCLASS.ORD,defaults:n}),t.misEmpty=t.mbase.Subclass({type:"isEmpty",isToken:!0,isSpacelike:function(){return!0},texClass:t.TEXCLASS.ORD,defaults:n}),e.Parse.Augment({Cursor:function(e){var n=t.mcursor("0");this.Push(n)},IsEmpty:function(e){var n=t.misEmpty("?");this.Push(n)}})}),MathJax.Ajax.Styles(o.default)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n(9),o=i(a)},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i,r="from, to { border-color: #000 }\n 50% { border-color: transparent }";t.default=(i={".mjx-cursor":{"-webkit-animation":"1s mj-ed-blink step-end infinite","-moz-animation":"1s mj-ed-blink step-end infinite","-ms-animation":"1s mj-ed-blink step-end infinite","-o-animation":"1s mj-ed-blink step-end infinite",animation:"1s mj-ed-blink step-end infinite","border-right":"2px solid #000",color:"transparent"},".mjx-cursor.wasRecentlyPlaced":{"border-right-color":"#000 !important"},".mj-ed-input":{left:"-100%",position:"absolute",top:"-100%"},".mj-ed-display":{"box-sizing":"border-box"},".mj-ed-display *":{outline:"none"},".mj-ed-selectionButton":{cursor:"text"},".mjx-isEmpty":{color:"#ccc"},"@keyframes mj-ed-blink":r},n(i,"@keyframes mj-ed-blink",r),n(i,"@-moz-keyframes mj-ed-blink",r),n(i,"@-webkit-keyframes mj-ed-blink",r),n(i,"@-ms-keyframes mj-ed-blink",r),n(i,"@-o-keyframes mj-ed-blink",r),i)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){n(this,e),this.key=t}return i(e,[{key:"getLabel",value:function(){return this.key?this.key.label?"\\("+this.key.label+"\\)":'<i class="material-icons">'+this.key.$label+"</i>":""}},{key:"getClickListener",value:function(){return this.key&&this.key.onClick?this.key.onClick:function(){return null}}}]),e}();t.default=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),a=i(r),o=[[{label:"(",onClick:function(e){return e.insertSymbol("(")}},{label:")",onClick:function(e){return e.insertSymbol(")")}},{label:"|",onClick:function(e){return e.insertSymbol("|")}},{label:"[",onClick:function(e){return e.insertSymbol("[")}},{label:"]",onClick:function(e){return e.insertSymbol("]")}},{label:"\\sqrt{a}",onClick:function(e){return e.insertCommand("\\sqrt",1)}},{label:"\\sqrt[n]{a}",onClick:function(e){return e.insertCommand("\\sqrt",1,!0)}},{label:"\\geq",onClick:function(e){return e.insertCommand("\\geq")}}],[{label:"x",onClick:function(e){return e.insert("x")}},{label:"7",onClick:function(e){return e.insert("7")}},{label:"8",onClick:function(e){return e.insert("8")}},{label:"9",onClick:function(e){return e.insert("9")}},{label:"\\frac{a}{b}",onClick:function(e){return e.insertCommand("\\frac",2)}},{label:"a^n",onClick:function(e){return e.insertCommand("^",1)}},{label:"a_n",onClick:function(e){return e.insertCommand("_",1)}},{label:"\\leq",onClick:function(e){return e.insertCommand("\\leq")}}],[{label:"y",onClick:function(e){return e.insert("y")}},{label:"4",onClick:function(e){return e.insert("4")}},{label:"5",onClick:function(e){return e.insert("5")}},{label:"6",onClick:function(e){return e.insert("6")}},null,null,null,{label:">",onClick:function(e){return e.insertSymbol(">")}}],[{label:"z",onClick:function(e){return e.insert("z")}},{label:"1",onClick:function(e){return e.insert("1")}},{label:"2",onClick:function(e){return e.insert("2")}},{label:"3",onClick:function(e){return e.insert("3")}},{label:"-",onClick:function(e){return e.insertSymbol("-")}},{label:"+",onClick:function(e){return e.insertSymbol("+")}},{label:"\\div",onClick:function(e){return e.insertCommand("\\div")}},{label:"<",onClick:function(e){return e.insertSymbol("<")}}],[null,{label:",",onClick:function(e){return e.insertSymbol(",")}},{label:"0",onClick:function(e){return e.insert("0")}},{label:".",onClick:function(e){return e.insertSymbol(".")}},null,{label:"\\%",onClick:function(e){return e.insertSymbol("%")}},{label:"=",onClick:function(e){return e.insertSymbol("=")}},null,null],[{$label:"&#xE314;",onClick:function(e){return e.moveCursorLeft()}},{$label:"&#xE315;",onClick:function(e){return e.moveCursorRight()}},{$label:"&#xE14A;",onClick:function(e){return e.erase()}},null,null,null,null,null]];t.default={keyList:o,keyRows:o.length,keyColumns:o[0].length,getKey:function(e,t){return new a.default(o[e][t])}}},function(e,t){"use strict";function n(){var e={".mjk-container":{"background-color":"rgba(0, 0, 0, 0.5)",height:"100%",left:0,position:"absolute",top:0,width:"100%"},".mjk-keyboard":{"background-color":"#f1f1f1",border:"1px solid #ccc",bottom:0,left:0,padding:"1em 0",position:"absolute",width:"320px"},".mjk-keyboard.isMobile":{border:"none","border-top":"1px solid #ccc"},".mjk-keyRow":{"align-items":"center",display:"flex","justify-content":"center",overflow:"hidden"},".mjk-key":{"align-items":"center","background-color":"transparent",border:"none",color:"#333",display:"flex",float:"left","justify-content":"center","text-align":"center"},".mjk-input":{"background-color":"#fff",position:"absolute !important","overflow-x":"scroll"},".mjk-input .mj-ed-display":{border:"none !important"}};MathJax.Ajax.Styles(e)}window.addEventListener("load",n)},function(e,t){"use strict";function n(e,t){Object.keys(t).forEach(function(n){var i=t[n];"number"==typeof i&&(i+="px"),e.style[n]=i})}function i(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function r(e,t){for(var n=e;n;){if(n===t)return!0;n=n.parentNode}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.applyStyles=n,t.emptyElement=i,t.findNode=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(3),s=i(o),l=function(){function e(t){r(this,e);var n=new s.default(t);this.editor=n.editor,this.version="1.0.1"}return a(e,[{key:"getValue",value:function(){return this.editor.getValue()}}]),e}();e.exports=l}])});